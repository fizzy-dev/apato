<!DOCTYPE html>
<html lang="en">

<head>
    <%- include('../partials/head'); -%>
</head>

<body>
    <%- include('../partials/header'); -%>

    <div class="container" style="margin-top: 50px;">
        <div class="row">
            <div class="col-12 col-sm-4">
                <%- include('../partials/apartmentThumbnail', { apartment }); -%>
            </div>
            <div class="col-12 col-sm-8">
                <a class="hor-flex" href="/users/<%= owner.id %>" style="align-items: center;">
                    <img class="apt-account-thumbnail rounded-circle"
                        src="<%= owner.profilePicture ? owner.profilePicture : '/images/default-user.png' %>"
                        alt="Profile Picture" style="margin-right: 10px;">
                    <h6><%= owner.firstName %> <%= owner.lastName %></h6>
                </a>
                <hr>
                <h5 style="margin-bottom: 20px;">Mô tả</h5>
                <p>Some descriptions.</p>
                <h5 style="margin-bottom: 20px;">Tiện ích</h5>
                <p>Two bedrooms</p>
                <p>Allow dogs</p>
            </div>
            <div class="col-12 col-sm-12" style="margin-top: 50px;">
                <h5 style="margin-bottom: 20px;">Vị trí</h5>
                <div id="map" style="width: 100%; height: 300px; margin-bottom: 20px;"></div>
                <h5 style="margin-bottom: 20px;">Đánh giá</h5>
                <p>Chưa có đánh giá.</p>
            </div>
        </div>
    </div>

    <%- include('../partials/footer'); -%>
    <script>
        function initMap() {
            var lng;
            var lat;
            var string = document.getElementById("apartmentLocation").innerHTML;
            console.log(encodeURI(string));
            $.ajax({
                url: `https://maps.googleapis.com/maps/api/geocode/json?address=${encodeURI(string)}&key=AIzaSyCLPdkZYJuLJfDoxSeMVJZ2o7bsHCiIZuI`,
                method: 'get',
                success: function (res) {
                    lng = res.results[0].geometry.location.lng;
                    lat = res.results[0].geometry.location.lat;
                    var map = new google.maps.Map(document.getElementById('map'), {
                        center: { lat, lng },
                        zoom: 15
                    });
                    var marker = new google.maps.Marker({
                        position: { lat, lng },
                        map
                    });
                },
                error: function (xhr) {
                }
            });
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCLPdkZYJuLJfDoxSeMVJZ2o7bsHCiIZuI&callback=initMap"
        async defer></script>
</body>

</html>